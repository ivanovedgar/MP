\chapter{Introduction}
Pan-and-Tilt Unit (PTU) is a stabilised 2-axes platform mounted on the Idris electric vehicle that holds a panoramic camera. This vehicle is used for the research and drives over the curved surfaces \cite{ProjectIdris}. PTU has a built in functionality to stabilize at the chosen position, so that if rover drives up the hill camera stays vertical. Theoretically to achieve camera verticality stabilization command could be invoked only once, when the rover is standing on the flat surface, or its position could be adjusted manually if it is on a curved surface and then stabilization command issued. 

\section{Problem Analysis}
To ensure stability of the camera PTU uses gyroscopes, which in a perfect world would be enough. Unfortunately the well known problem of the gyroscopes is that their readings are affected by the different air temperature, magnetic effects, friction etc.\cite{HandbookOfModernSensors}. In reality when PTU is issued with the stabilization command platform slowly drifts on both axes and in ~1-2 minutes goes to the position which is 20 degrees different from where it should be. This project will concentrate on fixing this particular issue and try to enhance current system functionality.

\section{Proposed Solution}
One of the possible solutions could be the use of the additional PTU functionality. It allows to cancel drift by specifying, calculated in advance, drift rate in radians per second. The problem with this solution is that the drift rate can change if the surround environment changes (sun goes behind the clouds and air temperature drops affecting gyroscope readings) and manually calculating new drift rate every 10 minutes becomes infeasible and tedious. 

Proposed solution is to automate drift rate calculation so that it can be adjusted while driving. However this approach requires additional information about the current PTU orientation in the space (its inclination angles with respect to gravity). For this purpose can be used electronic inclinometer. Inclinometer response is electric signal representing an angle between the internal axis and the gravity vector \cite{HandbookOfModernSensors}. Accurate reading with such device can be obtained only if it is in a stable position and does not accelerate, otherwise it will provide erroneous data representing sum of two vectors â€“ earth gravity and acceleration. This imposes certain limitations as to of when PTU drift rate calibration can be performed, meaning that the vehicle will have to stop every time for this task to take place.

\section{Control System}
My work will be based on the system that is currently used to control PTU and taker readings from the inclinometer. Current system consists from the Gumstix minicomputer, gpio14 chip, relays, inclinometer, PTU, server side code (running on Gumstix), client side code (provides API for the interaction with the main system) and the library implementing PTU TASS communication protocol to interact with the PTU.

There was a decision made by the client to replace currently used platform (Gumstix). The rationale behind that were client concerns about the currently used Gumstix computer which is becoming old and in case of a breakdown it would be difficult to find a replacement parts. Another requirement was the ability to compile accompanying code on the platform itself (this is currently impossible on the Gumstix due to the hardware limitations), instead of cross-compiling code on the PC and then uploading executables to the Gumstix. After a short discussion Raspberry Pi minicomputer was chosen as a replacement platform, it has enough power to compile code as well as all required interfaces to connect with the other equipment. PTU TASS library will be reused and its functionality extended to implement new features. Server side and client side code will be adjusted to provide access to the new functionality.

\section{Aims}
The aim of this project is to modify current system and extend its functionality to support automatic drift rate calculation and following calibration  The outcome of the project should be a system that provides simple way to control PTU including stabilization functionality.

Main tasks
\begin{itemize}
\item Port current system from the Gumstix on to the Raspberry Pi.
\subitem This includes recompiling code on the new system and tweaking it to work with the I$^2$C bus.
\item Extend functionality of the PTU TASS library.
\subitem Incorporate new commands for the stabilization and drift rate.
\item Implement PTU drift rate calculation functionality.
\end{itemize}  




