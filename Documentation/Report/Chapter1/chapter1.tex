\chapter{Introduction}
Pan-and-Tilt Unit (PTU) is a stabilised 2-axes platform mounted on the Idris electric vehicle that holds a panoramic camera. This vehicle is used for the research and drives over the curved surfaces \cite{ProjectIdris}. PTU has a built in functionality to stabilize at the chosen position: in case the rover drives up the hill camera will stay vertical. In order to achieve camera verticality stabilization command could only be invoked once, when the rover is standing on the flat surface. Its position could also be adjusted manually if it is on a curved surface and then stabilization command could be issued. 

\section{Problem Analysis}
To ensure stability of the camera PTU uses gyroscopes, which would be enough on its own in a perfect world. However, the well known problem of the gyroscopes is that their readings are affected by the different air temperature, magnetic effects, friction etc.\cite{HandbookOfModernSensors}. When PTU is issued with the stabilization command the platform slowly drifts on both axes and goes to the position which can be up to 20 degrees different from where it should be. This project will concentrate on fixing this particular issue as well as trying to enhance the overall system functionality.

\section{Proposed Solution}
One of the possible solutions could be the use of the additional PTU functionality. It allows to cancel drift by specifying the calculated in advance drift rate in radians per second. The problem with this solution is that the drift rate can change if the surround environment changes (sun goes behind the clouds and air temperature drops affecting gyroscope readings). It is impossible to calculate new drift rate manually every 10 minutes.

The proposed solution is to automate the drift rate calculation so that it can be adjusted while driving. However this approach requires additional information about the current vehicle orientation in the space (its inclination angles with respect to gravity) to be able to predict required PTU position which will then be compared with the actual position and the drift rate that has been calculated. Electronic inclinometer can be used for this purpose. Inclinometer response is an electric signal representing an angle between the internal axis and the gravity vector \cite{HandbookOfModernSensors}. Accurate readings can only be obtained using the device if it is in a stable position and does not accelerate, otherwise it will provide erroneous data representing the sum of two vectors â€“ earth gravity and acceleration. This imposes certain limitations. PTU drift rate calibration can only be performed when the vehicle does not move.

\section{Control System}
This project will be based on the system that is currently used to control PTU and takes readings from the inclinometer. Current system consists of the Gumstix minicomputer, gpio14 chip, relays, inclinometer, PTU, server side code (running on Gumstix), client side code (provides API for the interaction with the main system) and the library implementing PTU TASS communication protocol to interact with the PTU.

There was a decision made by the client to replace the platform (Gumstix) that is currently used. The rationale behind the decision were client's concerns about the currently used Gumstix computer which is getting old. In case of a breakdown it would be difficult to find the replacement parts. One of the features requested was the ability to compile accompanying code on the platform itself (this is currently impossible on the Gumstix due to the hardware limitations) instead of cross-compiling code on the PC and then uploading executables to the Gumstix. Following a thorough discussion Raspberry Pi minicomputer was chosen as a replacement platform. It has enough power to compile the code as well as all the required interfaces that can be connected to the other equipment. PTU TASS library will be reused and its functionality extended to implement the new features. Server side and client side code will be adjusted to provide access to the new functionality.

\section{Analysis}
The aim of this project is to modify current system and extend its functionality to support automatic drift rate calculation and its calibration. The outcome of the project should be a redesigned system that provides a simple way to control PTU with stabilization functionality.

Main objectives
\begin{itemize}
\item Port current system from the Gumstix on to the Raspberry Pi.
\item Incorporate new commands for the stabilization and drift rate.
\item Implement PTU drift rate calculation functionality.
\item Extend client side API to allow new functionality.
\end{itemize}

\section{Process}
Following the initial evaluation of the different software development methodologies the feature-driven development methodology was adopted. FDD is suitable for this project because different requirements of the overall system can be expressed as the features. The overall model for the hardware and software parts was clear since the work is based on another system that will not experience major changes.
  